---
layout: post
title: Backbone.js Routes with PushState on ASP.NET MVC
---

A few weeks ago I had to work out how to get ASP.NET MVC to play nicely with Backbone.js' PushState support (because hashbangs in a URL are unattractive). If you're like me, you're probably used to seeing Backbone route URLs looking like: www.somewebsite.com/index#catalog/42. The goal was to remove the use of the hashbang. Backbone supports the HTML5 History API so I thought it shouldn't be too hard to implement. However, I ran into a few problems trying to get this to work with ASP.NET MVC 5.

First, to enable PushState on the client side, you'll need to enable it when you start Backbone history like so:
<blockquote>
<pre>Backbone.history.start({ pushState: true });</pre>
</blockquote>
Seems simple enough? Not quite. We also need to declare a document root; this allows the Backbone application to know what URL you're working with. This can be solved by a variety of ways; for this simple tutorial we're just going to hardcore our our URL. We'll use the default /home/index/ path that a new MVC project typically has (you can substitute your own path if you prefer).
<blockquote>
<blockquote>
<pre>using System;</pre>
<pre>namespace bindingJSON
{
 public class Squirrel
 {
 public string Name { get; set; }
 public int? Age { get; set; } // squirrels aren't required tell us their age
 public int Acorns { get; set; }
 public char Gender { get; set; }
 public string Hobby { get; set; }
 }
}</pre>
</blockquote>
<pre>
Backbone.history.start({</pre>
<pre>pushState: true</pre>
<pre>root: "/Home/index"</pre>
<pre>});</pre>
</blockquote>
I had setup a quick Node.js server and had no problem implementing it there with no issue - however, I couldn't get the same results in ASP.NET MVC 5<strong>.</strong>